{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmers Market</title>
</head>
<body>
    <h1>Farmers Market</h1>

    <h2>{{ farm.name }}</h2>
    <p>Balance: {{ farm.balance }} coins</p>

    <h3>Plots</h3>
    <ul>
        {% for plot in plots %}
            <li>
                ({{ plot.x }}, {{ plot.y }}) - 
                {% if plot.crop_type %}
                    {{ plot.crop_type.name }}
                    <button type="button" onclick="harvestPlot({{ plot.id }})">
                        Harvest
                    </button>
                {% else %}
                    <select id="crop-select-{{ plot.id }}">
                        <option value="">-- choose crop --</option>
                        {% for crop in crop_types %}
                            <option value="{{ crop.id }}">{{ crop.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" onclick="plantPlot({{ plot.id }})">
                        Plant
                    </button>
                {% endif %}
            </li>
        {% empty %}
            <li>No plots yet.</li>
        {% endfor %}
    </ul>

    <h3>Inventory</h3>
    <ul>
        {% for item in inventory %}
            <li>
                {{ item.crop_type.name }}: {{ item.quantity }}
                <button type="button" onclick="sellNpc({{ item.crop_type.id }}, {{ item.quantity }})">
                    Sell all to NPC
                </button>
            </li>
        {% empty %}
            <li>No crops in inventory.</li>
        {% endfor %}
    </ul>

    <script src="{% static 'game/js/main.js' %}"></script>
</body>
</html>